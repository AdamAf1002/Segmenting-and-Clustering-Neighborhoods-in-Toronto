<!DOCTYPE html>
<!-- saved from url=(0620)https://render.githubusercontent.com/view/ipynb?commit=e9d5cb5e4fe81a6f0e54487ec000e41f7c002c40&enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f616c696669617a2f436f7572736572615f43617073746f6e652f653964356362356534666538316136663065353434383765633030306534316637633030326334302f5365676d656e74696e67253230616e64253230436c7573746572696e672532304e65696768626f72686f6f6473253230696e253230546f726f6e746f2e6970796e62&nwo=alifiaz%2FCoursera_Capstone&path=Segmenting+and+Clustering+Neighborhoods+in+Toronto.ipynb&repository_id=149270628&repository_type=Repository#0bdb1386-51bb-4f66-894e-07bf11d69e5c -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Render</title>
  <meta name="referrer" content="never">
    <script src="./ipynb-4ffece0c9e76d61e11334fc54a86a1bc.js.téléchargement"></script><link rel="stylesheet" href="./ipynb-cdc8a2c29b9e77afb5ead41e895d2850.css">


</head>
<body class="" data-render-url="https://render.githubusercontent.com" data-github-hostname="github.com">
  <div class="render-shell js-render-shell" data-document-nwo="alifiaz/Coursera_Capstone" data-document-commit="e9d5cb5e4fe81a6f0e54487ec000e41f7c002c40" data-document-path="Segmenting and Clustering Neighborhoods in Toronto.ipynb" data-file="https://github-render.s3.amazonaws.com/prod/f613f723de63b7fda8bcfcbec5184a04-render.html?AWSAccessKeyId=AKIAJILR36AMCOMBK3MQ&amp;Signature=2a7whYGVljXEjk6sQ113N3I5OPY%3D&amp;Expires=1585262579" data-meta="https://github-render.s3.amazonaws.com/prod/f613f723de63b7fda8bcfcbec5184a04-meta.json?AWSAccessKeyId=AKIAJILR36AMCOMBK3MQ&amp;Signature=MugdToUOaqtUSMRGBntxjfgL5kU%3D&amp;Expires=1585262579">
    

<div class="render-info">
  <div class="js-viewer-health render-health is-viewer-good">
    <span class="symbol">⊖</span>
    <span class="js-message message">Everything running smoothly!</span>
  </div>
</div>

<div id="notebook" class="js-html">
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Assignment IBM<a class="anchor-link" href="https://render.githubusercontent.com/view/ipynb?commit=e9d5cb5e4fe81a6f0e54487ec000e41f7c002c40&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f616c696669617a2f436f7572736572615f43617073746f6e652f653964356362356534666538316136663065353434383765633030306534316637633030326334302f5365676d656e74696e67253230616e64253230436c7573746572696e672532304e65696768626f72686f6f6473253230696e253230546f726f6e746f2e6970796e62&amp;nwo=alifiaz%2FCoursera_Capstone&amp;path=Segmenting+and+Clustering+Neighborhoods+in+Toronto.ipynb&amp;repository_id=149270628&amp;repository_type=Repository#Assignment-IBM">¶</a>
</h2>
<h3>To scrape the given Wikipedia page and create a Dataframe.<a class="anchor-link" href="https://render.githubusercontent.com/view/ipynb?commit=e9d5cb5e4fe81a6f0e54487ec000e41f7c002c40&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f616c696669617a2f436f7572736572615f43617073746f6e652f653964356362356534666538316136663065353434383765633030306534316637633030326334302f5365676d656e74696e67253230616e64253230436c7573746572696e672532304e65696768626f72686f6f6473253230696e253230546f726f6e746f2e6970796e62&amp;nwo=alifiaz%2FCoursera_Capstone&amp;path=Segmenting+and+Clustering+Neighborhoods+in+Toronto.ipynb&amp;repository_id=149270628&amp;repository_type=Repository#To-scrape-the-given-Wikipedia-page-and-create-a-Dataframe.">¶</a>
</h3>
<p>Transform the data on Wiki page into pandas dataframe</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Import Libraries</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="k">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Scrap List of postal codes of Canada wiki page content by using BeautifulSoup</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># download url data from internet</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">"https://en.wikipedia.org/wiki/List_of_postal_codes_of_Canada:_M"</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
<span class="n">Canada_data</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s1">'lxml'</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Convert content of PostalCode HTML table as dataframe</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="err">`</span><span class="c1"># creat a new Dataframe</span>
<span class="n">column_names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Postalcode'</span><span class="p">,</span><span class="s1">'Borough'</span><span class="p">,</span><span class="s1">'Neighborhood'</span><span class="p">]</span>
<span class="n">toronto</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">column_names</span><span class="p">)</span>

<span class="c1"># loop through to find postcode, borough, neighborhood </span>
<span class="n">content</span> <span class="o">=</span> <span class="n">Canada_data</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'div'</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s1">'mw-parser-output'</span><span class="p">)</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">tbody</span>
<span class="n">postcode</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">borough</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">neighborhood</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">'tr'</span><span class="p">):</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">td</span> <span class="ow">in</span> <span class="n">tr</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">'td'</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">postcode</span> <span class="o">=</span> <span class="n">td</span><span class="o">.</span><span class="n">text</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">borough</span> <span class="o">=</span> <span class="n">td</span><span class="o">.</span><span class="n">text</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span> 
            <span class="n">neighborhood</span> <span class="o">=</span> <span class="n">td</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">']'</span><span class="p">,</span><span class="s1">''</span><span class="p">)</span>
    <span class="n">toronto</span> <span class="o">=</span> <span class="n">toronto</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">'Postalcode'</span><span class="p">:</span> <span class="n">postcode</span><span class="p">,</span><span class="s1">'Borough'</span><span class="p">:</span> <span class="n">borough</span><span class="p">,</span><span class="s1">'Neighborhood'</span><span class="p">:</span> <span class="n">neighborhood</span><span class="p">},</span><span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># clean dataframe </span>
<span class="n">toronto</span> <span class="o">=</span> <span class="n">toronto</span><span class="p">[</span><span class="n">toronto</span><span class="o">.</span><span class="n">Borough</span><span class="o">!=</span><span class="s1">'Not assigned'</span><span class="p">]</span>
<span class="n">toronto</span> <span class="o">=</span> <span class="n">toronto</span><span class="p">[</span><span class="n">toronto</span><span class="o">.</span><span class="n">Borough</span><span class="o">!=</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">toronto</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">toronto</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
    <span class="k">if</span> <span class="n">toronto</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Not assigned'</span><span class="p">:</span>
        <span class="n">toronto</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">toronto</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span>
                                 
<span class="n">df</span> <span class="o">=</span> <span class="n">toronto</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">'Postalcode'</span><span class="p">,</span><span class="s1">'Borough'</span><span class="p">])[</span><span class="s1">'Neighborhood'</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[7]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>

<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th>Postalcode</th>
      <th>Borough</th>
      <th>Neighborhood</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>M1B</td>
      <td>Scarborough</td>
      <td>Rouge, Malvern</td>
    </tr>
    <tr>
      <th>1</th>
      <td>M1C</td>
      <td>Scarborough</td>
      <td>Highland Creek, Rouge Hill, Port Union</td>
    </tr>
    <tr>
      <th>2</th>
      <td>M1E</td>
      <td>Scarborough</td>
      <td>Guildwood, Morningside, West Hill</td>
    </tr>
    <tr>
      <th>3</th>
      <td>M1G</td>
      <td>Scarborough</td>
      <td>Woburn</td>
    </tr>
    <tr>
      <th>4</th>
      <td>M1H</td>
      <td>Scarborough</td>
      <td>Cedarbrae</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Data Cleaning<a class="anchor-link" href="https://render.githubusercontent.com/view/ipynb?commit=e9d5cb5e4fe81a6f0e54487ec000e41f7c002c40&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f616c696669617a2f436f7572736572615f43617073746f6e652f653964356362356534666538316136663065353434383765633030306534316637633030326334302f5365676d656e74696e67253230616e64253230436c7573746572696e672532304e65696768626f72686f6f6473253230696e253230546f726f6e746f2e6970796e62&amp;nwo=alifiaz%2FCoursera_Capstone&amp;path=Segmenting+and+Clustering+Neighborhoods+in+Toronto.ipynb&amp;repository_id=149270628&amp;repository_type=Repository#Data-Cleaning">¶</a>
</h2>
<p>Drop "None" rows in DataFrame</p>
<p>Drop any row which contains 'Not assigned' value</p>
<p>All "Not assigned" will be replace to 'NaN' using numpy for convenience.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="n">empty</span> <span class="o">=</span> <span class="s1">'Not assigned'</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="o">.</span><span class="n">Postalcode</span> <span class="o">!=</span> <span class="n">empty</span> <span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Borough</span> <span class="o">!=</span> <span class="n">empty</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Neighborhood</span> <span class="o">!=</span> <span class="n">empty</span><span class="p">)]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[13]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>

<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th>Postalcode</th>
      <th>Borough</th>
      <th>Neighborhood</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>M1B</td>
      <td>Scarborough</td>
      <td>Rouge, Malvern</td>
    </tr>
    <tr>
      <th>1</th>
      <td>M1C</td>
      <td>Scarborough</td>
      <td>Highland Creek, Rouge Hill, Port Union</td>
    </tr>
    <tr>
      <th>2</th>
      <td>M1E</td>
      <td>Scarborough</td>
      <td>Guildwood, Morningside, West Hill</td>
    </tr>
    <tr>
      <th>3</th>
      <td>M1G</td>
      <td>Scarborough</td>
      <td>Woburn</td>
    </tr>
    <tr>
      <th>4</th>
      <td>M1H</td>
      <td>Scarborough</td>
      <td>Cedarbrae</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">neighborhood_list</span><span class="p">(</span><span class="n">grouped</span><span class="p">):</span>    
    <span class="k">return</span> <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">grouped</span><span class="p">[</span><span class="s1">'Neighborhood'</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()))</span>
                    
<span class="n">grp</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">'Postalcode'</span><span class="p">,</span> <span class="s1">'Borough'</span><span class="p">])</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">grp</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">neighborhood_list</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'Neighborhood'</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">df2</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">df2</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>(103, 3)
</pre>
</div>
</div>

<div class="output_area">
<div class="prompt output_prompt">Out[18]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>

<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th>Postalcode</th>
      <th>Borough</th>
      <th>Neighborhood</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>M1B</td>
      <td>Scarborough</td>
      <td>Rouge, Malvern</td>
    </tr>
    <tr>
      <th>1</th>
      <td>M1C</td>
      <td>Scarborough</td>
      <td>Highland Creek, Rouge Hill, Port Union</td>
    </tr>
    <tr>
      <th>2</th>
      <td>M1E</td>
      <td>Scarborough</td>
      <td>Guildwood, Morningside, West Hill</td>
    </tr>
    <tr>
      <th>3</th>
      <td>M1G</td>
      <td>Scarborough</td>
      <td>Woburn</td>
    </tr>
    <tr>
      <th>4</th>
      <td>M1H</td>
      <td>Scarborough</td>
      <td>Cedarbrae</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>
</pre></div>

</div>
</div>
</div>

</div>
 

</div>

  </div>

  



</body></html>